apiVersion: skaffold/v2beta28
kind: Config
metadata:
  name: vscode
build:
  artifacts:
    - image: gcr.io/dev-bytetoko/devbox
      context: .
      kaniko:
        dockerfile: Dockerfile
        buildArgs:
          BASE_IMAGE: gcr.io/dev-bytetoko/google-deep-learning/base-cpu:5c65f19-dirty@sha256:f5dcabed895eb194839154037db893349d8c4fd9aa8c46d6b75a49825aad3606
        logTimestamp: true
  # Due to https://github.com/GoogleContainerTools/skaffold/issues/7701
  # Try using googleCloudBuild rather than building in cluster.
  googleCloudBuild:
    projectId: dev-bytetoko
    machineType: E2_HIGHCPU_32
    timeout: 3600s
    # cluster:
    #   namespace: kaniko
    #   serviceAccount: kaniko
    #   resources:
    #     requests:
    #       cpu: 4
    #       memory: 8Gi
    #       ephemeralStorage: 30Gi
    #     limits:
    #       cpu: 4
    #       memory: 8Gi
    #       ephemeralStorage: 30Gi
deploy:
  kustomize: {}
