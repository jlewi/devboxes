apiVersion: skaffold/v2beta28
kind: Config
metadata:
  name: vscode
build:
  artifacts:
    - image: gcr.io/dev-bytetoko/devbox
      context: .
      kaniko:
        dockerfile: Dockerfile
        buildArgs:
          BASE_IMAGE: gcr.io/dev-bytetoko/google-deep-learning/base-cpu:9b0745c-dirty@sha256:9b104fade611897290902f8492fce2cd2240f25e5e8f6a54cf310c82e689f820
        logTimestamp: true
  # Due to https://github.com/GoogleContainerTools/skaffold/issues/7701
  # Try using googleCloudBuild rather than building in cluster.
  googleCloudBuild:
    projectId: dev-bytetoko
    machineType: E2_HIGHCPU_32
    timeout: 3600s
    # cluster:
    #   namespace: kaniko
    #   serviceAccount: kaniko
    #   resources:
    #     requests:
    #       cpu: 4
    #       memory: 8Gi
    #       ephemeralStorage: 30Gi
    #     limits:
    #       cpu: 4
    #       memory: 8Gi
    #       ephemeralStorage: 30Gi
deploy:
  kustomize: {}
